init_config:

instances:
    - url: http://localhost:8500

      # Whether to perform checks against the Consul service Catalog
      catalog_checks: yes

      # Whether to enable new leader checks from this agent
      # Note: if this is set on multiple agents in the same cluster
      # you will receive one event per leader change per agent
      new_leader_checks: yes

      # Services to restrict catalog querying to
      # The default settings query up to 50 services. So if you have more than
      # this many in your Consul service catalog, you will want to fill in the
      # whitelist
      service_whitelist:
        - zookeeper
        - gunicorn
        - redis

instances:
    -   url: <%= @url %>
        catalog_checks: <%= @catalog_checks ? 'yes' : 'no' %>
        new_leader_checks: <%= @new_leader_checks ? 'yes' : 'no' %>
<% if @service_whitelist and ! @service_whitelist.empty? -%>
        service_whitelist:
  <%- Array(@service_whitelist).each do |svc| -%>
    <%- if svc != '' -%>
            - <%= svc %>
    <%- end -%>
  <%- end -%>
<% end -%>
